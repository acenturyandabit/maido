<html>
<!--
Hey there!



Yes, you!







It's Steven here. Right now, I'm the only one holding up the ship, but I'd love to have a few more hands on deck.
If you want in, email me! steeven.liu2@gmail.com.

Otherwise if you've got a bug or feature request you want to see, same email address ^ Just append a shibboleet to 
your message and I'll give you higher priority. (Yes I'm trying to make that a thing xD)

Cheers!

~S
-->

<head>
    <script src="../jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="style.css">
    <title>Maido-Adaptive task tracker</title>
    <script>
        // lil safety
        if (Number(window.localStorage.getItem("maion")) == "1") {
            if (confirm(
                    "Another window with Maido is open. If you want, Maido can pull up the other window for you?"
                )) {
                window.localStorage.setItem("maion", "-1");
                setTimeout(() => {
                    window.location.href = "about:blank";
                }, 1000);

            }
        } else {
            window.name = "maido";
            $(window).on('unload', function () {
                window.localStorage.setItem("maion", 0)
            });
        }
        $(window.addEventListener('storage', function (e) {
            if (e.key == "maion") {
                if (e.newValue == "-1") {
                    alert("I'm here!");
                }
                if (e.newValue != "1") window.localStorage.setItem("maion", 1)
            }
        }));

        window.localStorage.setItem("maion", 1)

        function showdocs() {
            window.open("docs.html", "blank");
        }
    </script>
    <script src="https://www.gstatic.com/firebasejs/5.5.2/firebase.js"></script>
    <script src="lscommon.js"></script>
    <script src="localcore.js"></script>
    <script src="webcore.js"></script>

    <script src="support.js"></script>

    <script src="datesort.js"></script>

    <script src="search.js"></script>

    <script src="editor.js"></script>

    <script src="tagman.js"></script>
    <script src="compain.js"></script>

    <script src="../svg.min.js"></script>
    <script src="timeline.js"></script>
    <script>
        $(document).ready(() => {
            $("body").on('keyup', /*'.dialog',*/ (e) => {
                if (e.keyCode == 27) $(".dialog").hide()
            })
        });
    </script>
</head>

<body>
    <!--Hey there! It's your dev. If you're reading this, you probably know enough about web dev to offer realistic suggestions. I'd love to hear from you! My email is steeven.liu2@gmail.com, whenever you're ready. :) -->
    <!--Shibboleet.-->
    <ul>
        <li>
            <span>Maido</span>
        </li>
        <li class="oLocalOnly">
            <a>File</a>
            <div>
                <a onclick="saveToBrowser()">Save</a>
                <a onclick="loadFromBrowser()">Quickload</a>
                <a onclick="showLoader()">Load</a>
                <a onclick="unloadAll()">New</a>
            </div>
        </li>
        <li>
            <a>Actions</a>
            <div>
                <a onclick="alignDates()">Toggle date alignment</a>
            </div>
        </li>
        <li>
            <a>View</a>
            <div>
                <a onclick="toggleTimeline()">Toggle timeline</a>
            </div>
        </li>
        <li>
            <a>Preferences</a>
            <div>
            </div>
        </li>
        <li>
            <a>Help</a>
            <div>
                <a onclick="showdocs()">Documentation</a>
            </div>
        </li>

    </ul>
    <div id="timeline_svg" style="display:none">

    </div>
    <div style="display:flex;flex-direction:row">
        <div id="tasklist">
            <h2>Main List</h2>
            <span>Search: <input id="searchbar"></span>
            <table class="tdl" id="todolist">
                <tr class="pintotop">
                    <td>Add a new task...</td>
                </tr>
                <tr class="pintotop template">
                    <td><input data-role="name" placeholder="Task name"></td>
                    <td><input data-role="tags" placeholder="Tags"></td>
                    <td><input data-role="date" placeholder="Date"></td>
                    <td><button class="remove">Clear</button></td>
                </tr>
            </table>
        </div>
        <div id="todolist_db">
            <textarea class="template" data-role="description" placeholder="Description..." style="display: none"></textarea>
        </div>
    </div>
    <div id="nothingLeft">
        <div style="margin:auto; text-align:center">
            <img src="ash.png" style="width: 40%;">
            <p>Got nothing left to do? Yay! Whenever you're ready, you can add some more tasks by typing into
                the bar above and hitting 'Enter'.</p>
        </div>
    </div>
    <div class="dialog" id="loader_dialog">
        <div style="display: flex; height: 100%;">
        <div class="inner_dialog">
            <h2>Available save sessions:</h2>
            <div id="loader_dialog_panel_container">
                <div id="loader_dialog_list">
                </div>
            </div>
            <p>Or load from a string...</p>
            <textarea></textarea><br>
            <button onclick="loadFromString($('#loader_dialog>textarea')[0].value);$('#loader_dialog').hide();$('#dialog_box').hide()">Load from string</button><button onclick="$('#loader_dialog').hide();$('#dialog_box').hide()">Cancel</button>
        </div>
        <div class="dialog" id="dnfDialog">
            <h2>Uh oh...</h2>
            <p>We couldn't find the task list that you specified. Maybe check your spelling and try again?</p>
        </div>
    </div>
    </div>
</body>

</html>