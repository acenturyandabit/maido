<html>
  <head>
      <script src="../../jquery.min.js"></script>
    <script>
      var video = document.createElement("video");
      video.setAttribute("playsinline", "");
      video.setAttribute("autoplay", "");
      video.setAttribute("muted", "");
      video.style.width = "200px";
      video.style.height = "200px";

      /* Setting up the constraint */
      var facingMode = "user"; // Can be 'user' or 'environment' to access back or front camera (NEAT!)
      var constraints = {
        audio: false,
        video: {
          facingMode: facingMode
        }
      };

      /* Stream it to video element */
      
      navigator.mediaDevices
        .getUserMedia(constraints)
        .then(function success(stream) {
          video.srcObject = stream;
          vw=stream.getVideoTracks()[0].getSettings().width;
          vh=stream.getVideoTracks()[0].getSettings().height;
        });
        window.onload=function(){
            document.getElementsByTagName("DIV")[0].appendChild(video);
        }
        $(()=>{$("div").on("click",()=>{
             c=document.createElement("canvas");
             ctx=c.getContext('2d');
             ctx.drawImage(video,0,0,vw,vh,0,0,200,100);
             $("body").append(c);
        })})
    
    </script>
  </head>
  <body>
      <div></div>
  </body>
</html>
