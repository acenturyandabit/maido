<html>
  <head>
    <style>
    body{
      width: 100%;
      height: 100%;
    }
    </style>
    <link rel="manifest" href="manifest.json" />
    <script src="jquery.min.js"></script>
    <script>
      if ("serviceWorker" in navigator) {
        window.addEventListener("load", function() {
          navigator.serviceWorker.register("sw.js").then(
            function(registration) {
              // Registration was successful
              console.log(
                "ServiceWorker registration successful with scope: ",
                registration.scope
              );
            },
            function(err) {
              // registration failed :(
              console.log("ServiceWorker registration failed: ", err);
            }
          );
        });
      }
      //find the canvas and draw the time on.
      // 6 shapes: 2 s 2 min 2 h
      $(() => {
        c = $("canvas")[0];
        c.width = c.offsetWidth = document.body.offsetWidth;
        c.height = c.offsetHeight = document.body.offsetHeight;
        ctx = c.getContext("2d");
        setInterval(timerDraw, 500);
      });
      function timerDraw() {
        cx = c.width / 2;
        cy = c.height / 2;
        cr = Math.min(c.width, c.height) / 2;
        s = new Date().getSeconds();
        m = new Date().getMinutes();
        h = new Date().getHours();
        ctx.fillStyle = "#000000";
        ctx.fillRect(0, 0, cx * 2, cy * 2);

        shapes = [
          { scale: 0.9, data: s % 10, col: "#cccc00" },
          { scale: 0.7, data: Math.floor(s / 10), col: "#aaaa00" },
          { scale: 0.5, data: m % 10, col: "#4444ff" },
          { scale: 0.4, data: Math.floor(m / 10), col: "#aeaeff" },
          { scale: 0.3, data: h % 10, col: "#44ff44" },
          { scale: 0.2, data: Math.floor(h / 10), col: "#aeffae" }
        ];
        for (j = 0; j < shapes.length; j++) {
          ctx.beginPath();
          scale = shapes[j].scale;
          ctx.fillStyle = shapes[j].col;
          if (shapes[j].data > 2) {
            ctx.moveTo(cx - cr * scale, cy);
            for (i = 0; i < shapes[j].data; i++) {
              ctx.lineTo(
                cx - Math.cos((i * 2 * Math.PI) / shapes[j].data) * cr * scale,
                cy - Math.sin((i * 2 * Math.PI) / shapes[j].data) * cr * scale
              );
            }
            ctx.moveTo(cx - cr * scale, cy - cr * scale);
          }else if (shapes[j].data==1){
            ctx.arc(cx,cy,cr*scale,0,2*Math.PI);
          }else if (shapes[j].data==2){
            scale*=Math.SQRT2;
            ctx.arc(cx,cy-cr*scale/Math.SQRT2,cr*scale,Math.PI/4,3*Math.PI/4);
            ctx.arc(cx,cy+cr*scale/Math.SQRT2,cr*scale,5*Math.PI/4,7*Math.PI/4);
          }
          ctx.closePath();
          ctx.fill();
        }
      }
    </script>
    <style>
      body {
        margin: 0;
      }

      div {
        height: 100%;
        width: 100%;
      }
    </style>
  </head>

  <body>
    <canvas></canvas>
  </body>
</html>
